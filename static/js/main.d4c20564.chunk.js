(this["webpackJsonpmesto-react"]=this["webpackJsonpmesto-react"]||[]).push([[0],[,,,,function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADoAAAA6CAYAAADhu0ooAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAE8SURBVHgB7dmBacMwEIXhayfwKN2g3aQaJZu0G3SEjpBRMsKLTHIgjFFkWyfpzPtABEKI9JMQTkSEiIiIiIi6ATBJT/EAP/MSQ/H9P+K6xfUtPTwjlUlsEqnaxi4iTWJXIg/Fvss+byvPhVqxc2R8+I9rKtzbTjzML9Ydis18krMgPdSOHTIyOVyV2KEj1dFYF5Fqb6yrSLU11mWkKo11HalexZ4iUmVi/04TqTKx54lUhbFBzuD5de0auXeoL4bHgP6VecmneIf8r2vK9PJuakOk39gXkfO91eSK1xQKhwHXsdg48biMxc6xzlUsDs6uLmJRaUAfOhaVbyFDxsLoqjVULIzvk0PExs0mNLhPZmIv0goe041ZZLLPMvaK1v+sLWKDGEli20cmhwiWkck+F/T+j5SIiIiIiPq6A+E83r5G5qT6AAAAAElFTkSuQmCC"},,function(e,t,a){},,function(e,t,a){e.exports=a.p+"static/media/logo.855a8c98.svg"},function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABoAAAAaCAYAAACpSkzOAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAB9SURBVHgB7dbBCYAwDAXQ4ASO4CiO4AgdwQ10BDfqKBklpjRCKIiXfLzkQyi95PHppUSAiMiiU9tJqBjC0sMQbEAEgr0gTypF5AOJaZRIIokkksifiEEFjjjsRDY5/DKHxTaxhTxgezSyQt/CMuls7j7rFEJE+kfvas0ImBsR7skYWCY75QAAAABJRU5ErkJggg=="},function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAoAAAAKCAYAAACNMs+9AAAACXBIWXMAAAsTAAALEwEAmpwYAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAABBSURBVHgB1cpBDQAgDEPRSUACEpCGA3A2CUgqXdgVtitNfnp5Io8BKExZi9DCmWaQffkCORwZ1Fll84ocqmEJtgEKMZN8lvdMKgAAAABJRU5ErkJggg=="},function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABYAAAAWAgMAAAC52oSoAAAADFBMVEUAAAD///////////84wDuoAAAAA3RSTlMAQHBaCvrnAAAAIUlEQVQI12NgYJB3ABLkUqGh+VNDAxj+g8AHKAUVpNBoAPerFytk60d3AAAAAElFTkSuQmCC"},function(e,t,a){e.exports=a.p+"static/media/del.9c3b03ae.svg"},,,,,function(e,t,a){e.exports=a(22)},,,,,function(e,t,a){"use strict";a.r(t);var n=a(0),o=a.n(n),r=a(7),i=a.n(r),c=(a(6),a(15)),s=a(1),l=a(8),u=a.n(l);var m=function(){return o.a.createElement("header",{className:"header"},o.a.createElement("img",{src:u.a,alt:"\u043b\u043e\u0433\u043e",className:"logo"}))},p=a(16),d=a(9),A=a.n(d),_=a(10),f=a.n(_),h=a(11),E=a.n(h),g=a(12),v=a.n(g),C=o.a.createContext();var k=function(e){var t=e._id,a=e.link,n=e.name,r=e.likes,i=e.owner,c=e.onCardClick,s=e.onCardLike,l=e.onCardDelete,u={_id:t,link:a,name:n,owner:i,likes:r},m=o.a.useContext(C),p=i._id===m._id,d=r.some((function(e){return e._id===m._id})),A="element__del ".concat(p?"":"element__del_hidden"),_="element__like ".concat(d?"element__like_liked":"");return o.a.createElement("div",{className:"element"},o.a.createElement("div",{className:"element__container"},o.a.createElement("img",{src:v.a,alt:"\u0443\u0434\u0430\u043b\u0438\u0442\u044c",className:A,onClick:function(){l(u)}}),o.a.createElement("img",{className:"element__photo",src:a,alt:n,onClick:function(){c(u)}})),o.a.createElement("div",{className:"element__bottom"},o.a.createElement("p",{className:"element__name"},n),o.a.createElement("div",{className:"element__likes"},o.a.createElement("button",{className:_,onClick:function(){s(u)}}),o.a.createElement("p",{className:"element__like-count"},r.length))))};var N=function(e){var t=e.onEditAvatar,a=e.onEditProfile,n=e.onAddPlace,r=e.onCardClick,i=e.cards,c=e.onCardLike,s=e.onCardDelete,l=o.a.useContext(C);return o.a.createElement("main",{className:"content"},o.a.createElement("section",{className:"profile"},o.a.createElement("div",{className:"profile__edit-part"},o.a.createElement("div",{className:"profile__avatar-column"},o.a.createElement("img",{alt:"\u0430\u0432\u0430\u0442\u0430\u0440",className:"profile__avatar",src:l.avatar}),o.a.createElement("a",{className:"profile__avatar-overlay",onClick:t},o.a.createElement("img",{src:A.a,alt:"icon",className:"profile__avatar-icon"}))),o.a.createElement("div",{className:"profile__text"},o.a.createElement("div",{className:"profile__edit-row"},o.a.createElement("h1",{className:"profile__name"},l.name),o.a.createElement("button",{className:"profile__edit-button",onClick:a},o.a.createElement("img",{src:f.a,alt:"\u0440\u0435\u0434\u0430\u043a\u0442\u0438\u0440\u043e\u0432\u0430\u0442\u044c",className:"profile__edit-icon"}))),o.a.createElement("p",{className:"profile__description"},l.about))),o.a.createElement("div",{className:"profile__add-part"},o.a.createElement("button",{className:"profile__add-button",onClick:n},o.a.createElement("img",{src:E.a,alt:"\u0434\u043e\u0431\u0430\u0432\u0438\u0442\u044c",className:"profile__add-icon"})))),o.a.createElement("section",{className:"elements"},i.map((function(e){var t=e._id,a=Object(p.a)(e,["_id"]);return o.a.createElement(k,Object.assign({key:t,_id:t},a,{onCardClick:r,onCardLike:c,onCardDelete:s}))}))))};var b=function(){return o.a.createElement("footer",{className:"footer"},o.a.createElement("p",{className:"footer__copyright"},"\xa9 2020 Mesto Russia"))},y=a(4),U=a.n(y);var O=function(e){var t=e.name,a=e.title,n=e.mod,r=e.isOpen,i=e.onClose,c=e.children,s=e.buttonName,l=e.onSubmit;return o.a.createElement("section",{className:"pop-up ".concat(t,"-pop ").concat(r&&"pops-visible")},o.a.createElement("div",{className:"pop-up__container"},o.a.createElement("button",{className:"pop-up__close-button",onClick:i},o.a.createElement("img",{src:U.a,alt:"\u0437\u0430\u043a\u0440\u044b\u0442\u044c",className:"pop-up__close-icon"})),o.a.createElement("form",{className:"pop-up__form pop-up__form_".concat(t),onSubmit:l,noValidate:!0},o.a.createElement("h2",{className:"pop-up__form-title"},a),o.a.createElement("fieldset",{className:"pop-up__form-input pop-up__form-input_".concat(n)},c,o.a.createElement("button",{type:"submit",className:"pop-up__button"},s)))))};var S=function(e){var t=e.cardName,a=e.cardLink,n=e.isOpen,r=e.onClose;return o.a.createElement("section",{className:"pop-up image-popup ".concat(n?"pops-visible":"")},o.a.createElement("div",{className:"image-popup__container"},o.a.createElement("button",{className:"pop-up__close-button image-popup__close-button",onClick:r},o.a.createElement("img",{src:n?U.a:"",alt:n?"\u0417\u0430\u043a\u0440\u044b\u0442\u044c":"",className:"image-popup__close-icon pop-up__close-icon"})),o.a.createElement("img",{className:"image-popup__image",src:n?a:"",alt:n?t:""}),o.a.createElement("p",{className:"image-popup__name"},n?t:"")))},j=a(13),B=a(14),x=new(function(){function e(t){Object(j.a)(this,e),this._url=t.baseUrl,this._authorization=t.headers.authorization,this._contentType=t.headers["Content-type"]}return Object(B.a)(e,[{key:"loadUserInfo",value:function(){return fetch("".concat(this._url,"/users/me"),{headers:{authorization:this._authorization,"Content-type":"".concat(this._contentType)}}).then((function(e){return e.ok?e.json():Promise.reject(e.status)})).catch((function(e){return console.log("Error ".concat(e))}))}},{key:"loadCards",value:function(){return fetch("".concat(this._url,"/cards"),{headers:{authorization:this._authorization,"Content-type":this._contentType}}).then((function(e){return e.ok?e.json():Promise.reject(e.status)})).catch((function(e){return console("Error ".concat(e))}))}},{key:"editUserProfile",value:function(e,t){return fetch("".concat(this._url,"/users/me"),{method:"PATCH",headers:{authorization:this._authorization,"Content-type":this._contentType},body:JSON.stringify({name:e,about:t})}).then((function(e){return e.ok?e.json():Promise.reject(e.status)}))}},{key:"editUserAvatar",value:function(e){var t=e.url;return fetch("".concat(this._url,"/users/me/avatar"),{method:"PATCH",headers:{authorization:this._authorization,"Content-type":this._contentType},body:JSON.stringify({avatar:t})}).then((function(e){return e.ok?e.json():Promise.reject(e.status)}))}},{key:"addCard",value:function(e){var t=e.name,a=e.link;return fetch("".concat(this._url,"/cards"),{method:"POST",headers:{authorization:this._authorization,"Content-type":this._contentType},body:JSON.stringify({name:t,link:a})}).then((function(e){return e.ok?e.json():Promise.reject(e.status)}))}},{key:"delCard",value:function(e){return fetch("".concat(this._url,"/cards/").concat(e),{method:"DELETE",headers:{authorization:this._authorization,"Content-type":this._contentType}}).then((function(e){return e.ok?e.json():Promise.reject(e.status)})).catch((function(e){return console.log("Error ".concat(e))}))}},{key:"changeLikeCardStatus",value:function(e,t){return fetch("".concat(this._url,"/cards/likes/").concat(e),{method:t?"PUT":"DELETE",headers:{authorization:this._authorization,"Content-type":this._contentType}}).then((function(e){return e.ok?e.json():Promise.reject(e.status)})).catch((function(e){return console.log("Error ".concat(e))}))}}]),e}())({baseUrl:"https://mesto.nomoreparties.co/v1/cohort-13",headers:{authorization:"8ae24bbd-d671-4b48-ac3b-ccb26b92e896","Content-type":"application/json"}});var P=function(e){var t=e.isOpen,a=e.onClose,n=e.onUpdateUser,r=o.a.useContext(C),i=o.a.useState(""),c=Object(s.a)(i,2),l=c[0],u=c[1],m=o.a.useState(""),p=Object(s.a)(m,2),d=p[0],A=p[1];return o.a.useEffect((function(){u(r.name),A(r.about)}),[r]),o.a.createElement(O,{name:"edit",title:"\u0420\u0435\u0434\u0430\u043a\u0442\u0438\u0440\u043e\u0432\u0430\u0442\u044c \u043f\u0440\u043e\u0444\u0438\u043b\u044c",isOpen:t,onClose:a,buttonName:"\u0421\u043e\u0445\u0440\u0430\u043d\u0438\u0442\u044c",onSubmit:function(e){e.preventDefault(),n(l,d)}},o.a.createElement("input",{type:"text",name:"name",value:l||"",className:"pop-up__input pop-up__input_edit-name",id:"edit-name-input",placeholder:"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u0438\u043c\u044f",required:!0,minLength:2,maxLength:40,pattern:"[A-Za-z\u0410-\u042f\u0430-\u044f\u0401\u0451\\s\\-]{1,}",onChange:function(e){var t=e.target;u(t.value)}}),o.a.createElement("span",{className:"pop-up__form-error",id:"edit-name-input-error"}),o.a.createElement("input",{type:"text",name:"description",value:d||"",className:"pop-up__input pop-up__input_edit-desc",id:"edit-desc-input",placeholder:"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u043e\u043f\u0438\u0441\u0430\u043d\u0438\u0435",required:!0,minLength:2,maxLength:200,onChange:function(e){var t=e.target;A(t.value)}}),o.a.createElement("span",{className:"pop-up__form-error",id:"edit-desc-input-error"}))};var T=function(e){var t=e.isOpen,a=e.onClose,n=e.onUpdateAvatar,r=o.a.useRef();return o.a.createElement(O,{name:"add",title:"\u041e\u0431\u043d\u043e\u0432\u0438\u0442\u044c \u0430\u0432\u0430\u0442\u0430\u0440",isOpen:t,onClose:a,buttonName:"\u041e\u0431\u043d\u043e\u0432\u0438\u0442\u044c",onSubmit:function(e){e.preventDefault(),n(r.current.value)}},o.a.createElement("input",{type:"url",name:"link",ref:r,className:"pop-up__input pop-up__input_avatar-url",id:"avatar-url-input",placeholder:"\u0421\u0441\u044b\u043b\u043a\u0430 \u043d\u0430 \u043a\u0430\u0440\u0442\u0438\u043d\u043a\u0443",required:!0}),o.a.createElement("span",{className:"pop-up__form-error",id:"avatar-url-input-error"}))};var w=function(e){var t=e.isOpen,a=e.onClose,n=e.onAddPlace,r=o.a.useState(""),i=Object(s.a)(r,2),c=i[0],l=i[1],u=o.a.useState(""),m=Object(s.a)(u,2),p=m[0],d=m[1];return o.a.createElement(O,{name:"avatar",title:"\u041d\u043e\u0432\u043e\u0435 \u043c\u0435\u0441\u0442\u043e",isOpen:t,onClose:a,buttonName:"\u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c",onSubmit:function(e){e.preventDefault(),n(c,p),l(""),d("")}},o.a.createElement("input",{type:"text",name:"name",value:c||"",className:"pop-up__input pop-up__input_add-name",id:"add-name-input",placeholder:"\u041d\u0430\u0437\u0432\u0430\u043d\u0438\u0435",required:!0,minLength:1,maxLength:30,onChange:function(e){var t=e.target;l(t.name)}}),o.a.createElement("span",{className:"pop-up__form-error",id:"add-name-input-error"}),o.a.createElement("input",{type:"url",name:"link",value:p||"",className:"pop-up__input pop-up__input_add-url",id:"add-url-input",placeholder:"\u0421\u0441\u044b\u043b\u043a\u0430 \u043d\u0430 \u043a\u0430\u0440\u0442\u0438\u043d\u043a\u0443",onChange:function(e){var t=e.target;d(t.value)},required:!0}),o.a.createElement("span",{className:"pop-up__form-error",id:"add-url-input-error"}))};var L=function(){var e=o.a.useState(!1),t=Object(s.a)(e,2),a=t[0],n=t[1],r=o.a.useState(!1),i=Object(s.a)(r,2),l=i[0],u=i[1],p=o.a.useState(!1),d=Object(s.a)(p,2),A=d[0],_=d[1],f=o.a.useState({isOpen:!1}),h=Object(s.a)(f,2),E=h[0],g=h[1],v=o.a.useState(!1),k=Object(s.a)(v,2),y=k[0],U=(k[1],o.a.useState({})),j=Object(s.a)(U,2),B=j[0],L=j[1],I=o.a.useState([]),z=Object(s.a)(I,2),R=z[0],D=z[1];function Q(){_(!1),n(!1),u(!1),g({isOpen:!1})}return o.a.useEffect((function(){x.loadUserInfo().then((function(e){return L(e)}))}),[]),o.a.useEffect((function(){x.loadCards().then((function(e){D(e)}))}),[]),o.a.createElement(C.Provider,{value:B},o.a.createElement(P,{isOpen:a,onClose:Q,onUpdateUser:function(e,t){x.editUserProfile(e,t).then((function(e){return L(e)})).catch((function(e){return console.log("Error ".concat(e," in editUserAvatar"))})),Q()}}),o.a.createElement(T,{isOpen:A,onClose:Q,onUpdateAvatar:function(e){x.editUserAvatar({url:e}).then((function(e){return L(e)})).catch((function(e){return console.log("Error ".concat(e," in editUserAvatar"))})),Q()}}),o.a.createElement(w,{isOpen:l,onClose:Q,onAddPlace:function(e,t){x.addCard({name:e,link:t}).then((function(e){return D([].concat(Object(c.a)(R),[e]))})).catch((function(e){return console.log("Error ".concat(e," in addCard"))})),Q()}}),o.a.createElement(O,{name:"delete",title:"\u0412\u044b \u0443\u0432\u0435\u0440\u0435\u043d\u044b?",isOpen:y,onClose:Q,buttonName:"\u0414\u0430"}),o.a.createElement(S,{cardLink:E.link,cardName:E.name,onClose:Q,isOpen:E.isOpen}),o.a.createElement("div",{className:"page"},o.a.createElement(m,null),o.a.createElement(N,{onEditProfile:function(){n(!0)},onAddPlace:function(){u(!0)},onEditAvatar:function(){_(!0)},onCardClick:function(e){g({isOpen:!0,link:e.link,name:e.name})},cards:R,onCardLike:function(e){var t=e.likes.some((function(e){return e._id===B._id}));x.changeLikeCardStatus(e._id,!t).then((function(t){var a=R.map((function(a){return a._id===e._id?t:a}));D(a)}))},onCardDelete:function(e){x.delCard(e._id).then((function(){console.log(e._id),D(R.filter((function(t){return t._id!==e._id})))})).catch((function(e){return console.log("\u041e\u0448\u0438\u0431\u043a\u0430 \u043f\u0440\u0438 \u0443\u0434\u0430\u043b\u0435\u043d\u0438\u0438 \u043a\u0430\u0440\u0442\u043e\u0447\u043a\u0438: ".concat(e))}))}}),o.a.createElement(b,null)))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));i.a.render(o.a.createElement(o.a.StrictMode,null,o.a.createElement(L,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}],[[17,1,2]]]);
//# sourceMappingURL=main.d4c20564.chunk.js.map